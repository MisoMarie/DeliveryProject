<!DOCTYPE html>
<html lang="ko"
      xmlns:th="https://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{public/layout}"
>
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script src="https://kit.fontawesome.com/d19fdaba43.js" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="../../static/css/user/cart.css" th:href="@{/css/user/cart.css}">
    <script src="../../static/js/user/cart.js" th:src="@{/js/user/cart.js}"></script>

</head>
<body>
    <main layout:fragment="main">
        <h1>장바구니</h1>
        <form id="order-form" th:action="@{/user/mypage}" method="post" class="cart-container">
            <section class="cart-info-container">
                <div class="cart-select-container">
                    <label>
                        <input type="checkbox">
                        <span>전체선택</span>
                    </label>
                    <button id="cart-all-rm-btn" type="button">선택삭제</button>
                </div>
                <div class="product" th:if="${carts.size() == 0}">
                    <b>상품이 존재하지 않습니다.</b>
                </div>
                <div class="product" th:each="cart: ${carts}">
                    <input type="hidden" name="no" th:value="${cart.cartNo}">
                    <input type="hidden" class="product-no" th:value="${cart.food.foodId}">
                    <label><input type="checkbox"></label>
                    <a th:href="@{|/filter/store/${cart.store.storeNo}|}" class="product-img-container">
                        <img th:src="|${cart.food.foodImage.imageURL}|" src="https://i.namu.wiki/i/l0x04r27DjSQmS-WgYk6I5x6IkKMyvZjRMyK5dI3EMoMikzCd2Kfl2SMRdvL3-y4zpxI_qLP-fs3QToSR7AU3g.webp" alt="#">
                    </a>
                    <div class="product-information-container">
                        <div>
                            <a class="name" th:text="${cart.food.foodName}">빅맥</a>
                        </div>
                        <div>
                            <b>음식점 이름:</b>
                            <span th:text="${cart.store.storeName}">대충 음식점</span>
                        </div>
                        <div>
                            <b>음식 카테고리:</b>
                            <span th:text="${cart.store.category}">대충 일식쯤</span>
                        </div>
                        <div>
                            <b>설명:</b>
                            <span th:text="${cart.food.foodDescription}">대충 빅맥임</span>
                        </div>
                        <div>
                            <b>수량:</b>
                            <span class="amount" th:text="|${cart.count}개|">3개</span>
                        </div>
                        <div class="price">
                            <b class="price" th:text="${#numbers.formatInteger(cart.food.foodPrice, 3, 'COMMA')}">123,900원</b>
                        </div>
                    </div>
                    <div class="rm-btn-container">
                        <button type="button"><i class="fa-solid fa-trash"></i></button>
                    </div>
                </div>
            </section>

            <section class="cart-summary-container">
                <div>
                    <div>
                        <span>총 상품금액</span>
                        <span th:if="${carts.size() == 0}">0원</span>
                        <span th:unless="${carts.size() == 0}" th:text="|${#numbers.formatInteger(#aggregates.sum(carts.![food.foodPrice]), 3, 'COMMA')}원|">733,000원</span>
                    </div>
<!--                    <div>-->
<!--                        <span>배달비</span>-->
<!--                        <span th:text="|${#numbers.formatInteger(#aggregates.sum(carts.![store.deliveryTip]), 3, 'COMMA')}원|">0원</span>-->
<!--                    </div>-->
                </div>

                <hr>

                <div class="total-price">
                    <span>총 결제 예상 금액</span>
                    <span th:if="${carts.size() == 0}">0원</span>
                    <span th:unless="${carts.size() == 0}" th:text="|${#numbers.formatInteger(#aggregates.sum(carts.![food.foodPrice]), 3, 'COMMA')}원|">733,000원</span>
                </div>

                <button type="button" id="cart-buy-btn">구매하기</button>
            </section>
        </form>
    </main>
</body>
</html>